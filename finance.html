<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Finance - Multi Calc Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        .fin-tabs { display: flex; gap: 10px; margin-bottom: 15px; overflow-x: auto; }
        .f-tab { padding: 8px 15px; border-radius: 20px; background: var(--surface); border: 1px solid var(--border); white-space: nowrap; cursor: pointer; }
        .f-tab.active { background: var(--primary); color: white; border-color: var(--primary); }
    </style>
</head>
<body>

<div class="app-container">
    <header>
        <i class="fas fa-bars" onclick="openNav()" style="cursor:pointer; font-size:1.2rem; color:var(--text-main)"></i>
        <h1>Finance & Banking</h1>
        <div></div>
    </header>

    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="index.html">Home</a>
        <a href="#">Privacy Policy</a>
    </div>

    <main>
        <!-- Finance Tabs -->
        <div class="fin-tabs">
            <div class="f-tab active" onclick="switchTab('cash', this)">Cash Tally</div>
            <div class="f-tab" onclick="switchTab('emi', this)">Loan EMI</div>
            <div class="f-tab" onclick="switchTab('sip', this)">SIP Inv.</div>
        </div>

        <!-- CASH TALLY SECTION -->
        <div id="cash" class="tab-content">
            <div class="card">
                <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                    <h3>Cash Counter</h3>
                    <span style="color:var(--danger)" onclick="resetCash()">Reset</span>
                </div>
                <div id="cashList"></div> <!-- Generated by JS -->
                <div style="background:var(--primary); color:white; padding:15px; border-radius:10px; text-align:center; margin-top:10px;">
                    Total: <span id="grandTotal" style="font-weight:bold; font-size:1.2rem">₹0</span>
                </div>
            </div>
        </div>

        <!-- EMI SECTION -->
        <div id="emi" class="tab-content" style="display:none">
            <div class="card">
                <h3>EMI Calculator</h3>
                <input type="number" id="e-p" placeholder="Loan Amount" oninput="cEMI()">
                <input type="number" id="e-r" placeholder="Interest Rate %" oninput="cEMI()">
                <input type="number" id="e-n" placeholder="Years" oninput="cEMI()">
                <div style="margin-top:15px; text-align:center;">
                    <div>Monthly EMI</div>
                    <div id="out-emi" style="font-size:1.5rem; color:var(--primary); font-weight:bold">₹0</div>
                </div>
            </div>
        </div>
        
        <!-- SIP SECTION -->
         <div id="sip" class="tab-content" style="display:none">
            <div class="card">
                <h3>SIP Calculator</h3>
                <input type="number" id="s-p" placeholder="Monthly Invest" oninput="cSIP()">
                <input type="number" id="s-r" placeholder="Return Rate %" oninput="cSIP()">
                <input type="number" id="s-n" placeholder="Years" oninput="cSIP()">
                <div style="margin-top:15px; text-align:center;">
                    <div>Maturity Amount</div>
                    <div id="out-sip" style="font-size:1.5rem; color:var(--success); font-weight:bold">₹0</div>
                </div>
            </div>
        </div>

    </main>

    <nav>
        <a href="index.html" class="nav-btn"><i class="fas fa-calculator"></i> Calc</a>
        <a href="finance.html" class="nav-btn active"><i class="fas fa-rupee-sign"></i> Finance</a>
        <a href="tools.html" class="nav-btn"><i class="fas fa-shapes"></i> Tools</a>
    </nav>
</div>

<script>
    if(localStorage.getItem('theme') === 'dark') document.body.setAttribute('data-theme', 'dark');
    function openNav() { document.getElementById("mySidenav").style.width = "250px"; }
    function closeNav() { document.getElementById("mySidenav").style.width = "0"; }

    function switchTab(id, btn) {
        document.querySelectorAll('.tab-content').forEach(d => d.style.display = 'none');
        document.getElementById(id).style.display = 'block';
        document.querySelectorAll('.f-tab').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    // Cash Logic
    const notes = [500, 200, 100, 50, 20, 10];
    let html = '';
    notes.forEach(n => {
        html += `<div style="display:flex; align-items:center; margin-bottom:8px; gap:10px">
            <span style="width:40px; font-weight:bold">₹${n}</span>
            <input type="number" data-n="${n}" style="margin:0" oninput="cCash()">
        </div>`;
    });
    document.getElementById('cashList').innerHTML = html;

    function cCash() {
        let t = 0;
        document.querySelectorAll('[data-n]').forEach(i => t += (i.value * i.getAttribute('data-n')));
        document.getElementById('grandTotal').innerText = "₹" + t.toLocaleString();
    }
    function resetCash() { document.querySelectorAll('[data-n]').forEach(i => i.value = ''); cCash(); }

    // EMI & SIP Logic
    function cEMI() {
        let p = document.getElementById('e-p').value, r = document.getElementById('e-r').value/1200, n = document.getElementById('e-n').value*12;
        let emi = (p*r*Math.pow(1+r,n))/(Math.pow(1+r,n)-1);
        document.getElementById('out-emi').innerText = "₹" + (Math.round(emi)||0).toLocaleString();
    }
    function cSIP() {
        let p = document.getElementById('s-p').value, r = document.getElementById('s-r').value/1200, n = document.getElementById('s-n').value*12;
        let m = p * ((Math.pow(1+r,n)-1)/r) * (1+r);
        document.getElementById('out-sip').innerText = "₹" + (Math.round(m)||0).toLocaleString();
    }
</script>
</body>
</html>